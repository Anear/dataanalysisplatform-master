(function(w,k,g){function b(d,l,u){var i,c=d.runtimeStyle&&d.runtimeStyle[l],s=d.style;return !/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(u)&&/^-?\d/.test(u)&&(i=s.left,c&&(d.runtimeStyle.left=d.currentStyle.left),s.left="fontSize"===l?"1em":u||0,u=s.pixelLeft+"px",s.left=i,c&&(d.runtimeStyle.left=c)),/^(thin|medium|thick)$/i.test(u)?u:Math.round(parseFloat(u))+"px"}function q(a){return parseInt(a,10)}function f(d,i,c,l){if(d=(d||"").split(","),d=d[l||0]||d[0]||"auto",d=v.Util.trimText(d).split(" "),"backgroundSize"!==c||d[0]&&!d[0].match(/cover|contain|auto/)){if(d[0]=-1===d[0].indexOf("%")?b(i,c+"X",d[0]):d[0],d[1]===g){if("backgroundSize"===c){return d[1]="auto",d}d[1]=d[0]}d[1]=-1===d[1].indexOf("%")?b(i,c+"Y",d[1]):d[1]}else{}return d}function j(H,D,z,u,G,y){var B,A,I,F,E=v.Util.getCSS(D,H,G);if(1===E.length&&(F=E[0],E=[],E[0]=F,E[1]=F),-1!==(""+E[0]).indexOf("%")){I=parseFloat(E[0])/100,A=z.width*I,"backgroundSize"!==H&&(A-=(y||u).width*I)}else{if("backgroundSize"===H){if("auto"===E[0]){A=u.width}else{if(/contain|cover/.test(E[0])){var C=v.Util.resizeBounds(u.width,u.height,z.width,z.height,E[0]);A=C.width,B=C.height}else{A=parseInt(E[0],10)}}}else{A=parseInt(E[0],10)}}return"auto"===E[1]?B=A/u.width*u.height:-1!==(""+E[1]).indexOf("%")?(I=parseFloat(E[1])/100,B=z.height*I,"backgroundSize"!==H&&(B-=(y||u).height*I)):B=parseInt(E[1],10),[A,B]}function h(a,c){var d=[];return{storage:d,width:a,height:c,clip:function(){d.push({type:"function",name:"clip",arguments:arguments})},translate:function(){d.push({type:"function",name:"translate",arguments:arguments})},fill:function(){d.push({type:"function",name:"fill",arguments:arguments})},save:function(){d.push({type:"function",name:"save",arguments:arguments})},restore:function(){d.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){d.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){d.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var e=[];return d.push({type:"function",name:"drawShape",arguments:e}),{moveTo:function(){e.push({name:"moveTo",arguments:arguments})},lineTo:function(){e.push({name:"lineTo",arguments:arguments})},arcTo:function(){e.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){e.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){e.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){d.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){d.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(i,l){return d.push({type:"variable",name:i,arguments:l}),l}}}function x(a){return{zindex:a,children:[]}}var p,m,v={};v.Util={},v.Util.log=function(a){v.logging&&w.console&&w.console.log&&w.console.log(a)},v.Util.trimText=function(a){return function(c){return a?a.apply(c):((c||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),v.Util.asFloat=function(a){return parseFloat(a)},function(){var a=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,c=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;v.Util.parseTextShadows=function(t){if(!t||"none"===t){return[]}for(var l=t.match(a),d=[],s=0;l&&l.length>s;s++){var e=l[s].match(c);d.push({color:e[0],offsetX:e[1]?e[1].replace("px",""):0,offsetY:e[2]?e[2].replace("px",""):0,blur:e[3]?e[3].replace("px",""):0})}return d}}(),v.Util.parseBackgroundImage=function(M){var H,B,y,K,A,D,C,N,J=" \r\n	",I=[],L=0,E=0,G=function(){H&&('"'===B.substr(0,1)&&(B=B.substr(1,B.length-2)),B&&N.push(B),"-"===H.substr(0,1)&&(K=H.indexOf("-",1)+1)>0&&(y=H.substr(0,K),H=H.substr(K)),I.push({prefix:y,method:H.toLowerCase(),value:A,args:N})),N=[],H=y=B=A=""};G();for(var z=0,F=M.length;F>z;z++){if(D=M[z],!(0===L&&J.indexOf(D)>-1)){switch(D){case'"':C?C===D&&(C=null):C=D;break;case"(":if(C){break}if(0===L){L=1,A+=D;continue}E++;break;case")":if(C){break}if(1===L){if(0===E){L=0,A+=D,G();continue}E--}break;case",":if(C){break}if(0===L){G();continue}if(1===L&&0===E&&!H.match(/^url$/i)){N.push(B),B="",A+=D;continue}}A+=D,0===L?H+=D:B+=D}}return G(),I},v.Util.Bounds=function(a){var c,d={};return a.getBoundingClientRect&&(c=a.getBoundingClientRect(),d.top=c.top,d.bottom=c.bottom||c.top+c.height,d.left=c.left,d.width=a.offsetWidth,d.height=a.offsetHeight),d},v.Util.OffsetBounds=function(a){var c=a.offsetParent?v.Util.OffsetBounds(a.offsetParent):{top:0,left:0};return{top:a.offsetTop+c.top,bottom:a.offsetTop+a.offsetHeight+c.top,left:a.offsetLeft+c.left,width:a.offsetWidth,height:a.offsetHeight}},v.Util.getCSS=function(d,o,e){p!==d&&(m=k.defaultView.getComputedStyle(d,null));var c=m[o];if(/^background(Size|Position)$/.test(o)){return f(c,d,o,e)}if(/border(Top|Bottom)(Left|Right)Radius/.test(o)){var a=c.split(" ");return 1>=a.length&&(a[1]=a[0]),a.map(q)}return c},v.Util.resizeBounds=function(C,A,u,c,B){var d,z,y=u/c,D=C/A;return B&&"auto"!==B?D>y^"contain"===B?(z=c,d=c*D):(d=u,z=u/D):(d=u,z=c),{width:d,height:z}},v.Util.BackgroundPosition=function(d,l,u,i,c){var s=j("backgroundPosition",d,l,u,i,c);return{left:s[0],top:s[1]}},v.Util.BackgroundSize=function(d,l,o,i){var c=j("backgroundSize",d,l,o,i);return{width:c[0],height:c[1]}},v.Util.Extend=function(a,c){for(var d in a){a.hasOwnProperty(d)&&(c[d]=a[d])}return c},v.Util.Children=function(a){var d;try{d=a.nodeName&&"IFRAME"===a.nodeName.toUpperCase()?a.contentDocument||a.contentWindow.document:function(i){var l=[];return null!==i&&function(s,y){var u=s.length,n=0;if("number"==typeof y.length){for(var z=y.length;z>n;n++){s[u++]=y[n]}}else{for(;y[n]!==g;){s[u++]=y[n++]}}return s.length=u,s}(l,i),l}(a.childNodes)}catch(c){v.Util.log("html2canvas.Util.Children failed with exception: "+c.message),d=[]}return d},v.Util.isTransparent=function(a){return"transparent"===a||"rgba(0, 0, 0, 0)"===a},v.Util.Font=function(){var a={};return function(A,n,D){if(a[A+"-"+n]!==g){return a[A+"-"+n]}var t,z,y,F=D.createElement("div"),C=D.createElement("img"),B=D.createElement("span"),E="Hidden Text";return F.style.visibility="hidden",F.style.fontFamily=A,F.style.fontSize=n,F.style.margin=0,F.style.padding=0,D.body.appendChild(F),C.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",C.width=1,C.height=1,C.style.margin=0,C.style.padding=0,C.style.verticalAlign="baseline",B.style.fontFamily=A,B.style.fontSize=n,B.style.margin=0,B.style.padding=0,B.appendChild(D.createTextNode(E)),F.appendChild(B),F.appendChild(C),t=C.offsetTop-B.offsetTop+1,F.removeChild(B),F.appendChild(D.createTextNode(E)),F.style.lineHeight="normal",C.style.verticalAlign="super",z=C.offsetTop-F.offsetTop+1,y={baseline:t,lineWidth:1,middle:z},a[A+"-"+n]=y,D.body.removeChild(F),y}}(),function(){function d(a){return function(n){try{a.addColorStop(n.stop,n.color)}catch(l){i.log(["failed to add color stop: ",l,"; tried to add: ",n])}}}var i=v.Util,e={};v.Generate=e;var c=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];e.parseGradient=function(K,G){var A,a,z,C,B,L,I,H,J,D,F,y,E=c.length;for(a=0;E>a&&!(z=K.match(c[a]));a+=1){}if(z){switch(z[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(A={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},B=z[2].match(/\w+/g)){for(L=B.length,a=0;L>a;a+=1){switch(B[a]){case"top":A.y0=0,A.y1=G.height;break;case"right":A.x0=G.width,A.x1=0;break;case"bottom":A.y0=G.height,A.y1=0;break;case"left":A.x0=0,A.x1=G.width}}}if(null===A.x0&&null===A.x1&&(A.x0=A.x1=G.width/2),null===A.y0&&null===A.y1&&(A.y0=A.y1=G.height/2),B=z[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g)){for(L=B.length,I=1/Math.max(L-1,1),a=0;L>a;a+=1){H=B[a].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),H[2]?(C=parseFloat(H[2]),C/="%"===H[3]?100:G.width):C=a*I,A.colorStops.push({color:H[1],stop:C})}}break;case"-webkit-gradient":if(A={type:"radial"===z[2]?"circle":z[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},B=z[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),B&&(A.x0=B[1]*G.width/100,A.y0=B[2]*G.height/100,A.x1=B[3]*G.width/100,A.y1=B[4]*G.height/100),B=z[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g)){for(L=B.length,a=0;L>a;a+=1){H=B[a].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),C=parseFloat(H[2]),"from"===H[1]&&(C=0),"to"===H[1]&&(C=1),A.colorStops.push({color:H[3],stop:C})}}break;case"-moz-linear-gradient":if(A={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},B=z[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),B&&(A.x0=B[1]*G.width/100,A.y0=B[2]*G.height/100,A.x1=G.width-A.x0,A.y1=G.height-A.y0),B=z[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g)){for(L=B.length,I=1/Math.max(L-1,1),a=0;L>a;a+=1){H=B[a].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),H[2]?(C=parseFloat(H[2]),H[3]&&(C/=100)):C=a*I,A.colorStops.push({color:H[1],stop:C})}}break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(A={type:"circle",x0:0,y0:0,x1:G.width,y1:G.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},B=z[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),B&&(A.cx=B[1]*G.width/100,A.cy=B[2]*G.height/100),B=z[3].match(/\w+/),H=z[4].match(/[a-z\-]*/),B&&H){switch(H[0]){case"farthest-corner":case"cover":case"":J=Math.sqrt(Math.pow(A.cx,2)+Math.pow(A.cy,2)),D=Math.sqrt(Math.pow(A.cx,2)+Math.pow(A.y1-A.cy,2)),F=Math.sqrt(Math.pow(A.x1-A.cx,2)+Math.pow(A.y1-A.cy,2)),y=Math.sqrt(Math.pow(A.x1-A.cx,2)+Math.pow(A.cy,2)),A.rx=A.ry=Math.max(J,D,F,y);break;case"closest-corner":J=Math.sqrt(Math.pow(A.cx,2)+Math.pow(A.cy,2)),D=Math.sqrt(Math.pow(A.cx,2)+Math.pow(A.y1-A.cy,2)),F=Math.sqrt(Math.pow(A.x1-A.cx,2)+Math.pow(A.y1-A.cy,2)),y=Math.sqrt(Math.pow(A.x1-A.cx,2)+Math.pow(A.cy,2)),A.rx=A.ry=Math.min(J,D,F,y);break;case"farthest-side":"circle"===B[0]?A.rx=A.ry=Math.max(A.cx,A.cy,A.x1-A.cx,A.y1-A.cy):(A.type=B[0],A.rx=Math.max(A.cx,A.x1-A.cx),A.ry=Math.max(A.cy,A.y1-A.cy));break;case"closest-side":case"contain":"circle"===B[0]?A.rx=A.ry=Math.min(A.cx,A.cy,A.x1-A.cx,A.y1-A.cy):(A.type=B[0],A.rx=Math.min(A.cx,A.x1-A.cx),A.ry=Math.min(A.cy,A.y1-A.cy))}}if(B=z[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g)){for(L=B.length,I=1/Math.max(L-1,1),a=0;L>a;a+=1){H=B[a].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),H[2]?(C=parseFloat(H[2]),C/="%"===H[3]?100:G.width):C=a*I,A.colorStops.push({color:H[1],stop:C})}}}}return A},e.Gradient=function(y,t){if(0!==t.width&&0!==t.height){var E,u,A=k.createElement("canvas"),z=A.getContext("2d");if(A.width=t.width,A.height=t.height,E=v.Generate.parseGradient(y,t)){switch(E.type){case"linear":u=z.createLinearGradient(E.x0,E.y0,E.x1,E.y1),E.colorStops.forEach(d(u)),z.fillStyle=u,z.fillRect(0,0,t.width,t.height);break;case"circle":u=z.createRadialGradient(E.cx,E.cy,0,E.cx,E.cy,E.rx),E.colorStops.forEach(d(u)),z.fillStyle=u,z.fillRect(0,0,t.width,t.height);break;case"ellipse":var F=k.createElement("canvas"),D=F.getContext("2d"),C=Math.max(E.rx,E.ry),B=2*C;F.width=F.height=B,u=D.createRadialGradient(E.rx,E.ry,0,E.rx,E.ry,C),E.colorStops.forEach(d(u)),D.fillStyle=u,D.fillRect(0,0,B,B),z.fillStyle=E.colorStops[E.colorStops.length-1].color,z.fillRect(0,0,A.width,A.height),z.drawImage(F,E.cx-E.rx,E.cy-E.ry,2*E.rx,2*E.ry)}}return A}},e.ListAlpha=function(a){var l,o="";do{l=a%26,o=String.fromCharCode(l+64)+o,a/=26}while(26*a>26);return o},e.ListRoman=function(s){var y,A=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],u=[1000,900,500,400,100,90,50,40,10,9,5,4,1],l="",z=A.length;if(0>=s||s>=4000){return s}for(y=0;z>y;y+=1){for(;s>=u[y];){s-=u[y],l+=A[y]}}return l}}(),v.Parse=function(aT,a9){function aW(){return Math.max(Math.max(ay.body.scrollWidth,ay.documentElement.scrollWidth),Math.max(ay.body.offsetWidth,ay.documentElement.offsetWidth),Math.max(ay.body.clientWidth,ay.documentElement.clientWidth))}function a0(){return Math.max(Math.max(ay.body.scrollHeight,ay.documentElement.scrollHeight),Math.max(ay.body.offsetHeight,ay.documentElement.offsetHeight),Math.max(ay.body.clientHeight,ay.documentElement.clientHeight))}function a6(a,c){var d=parseInt(aB(a,c),10);return isNaN(d)?0:d}function a4(d,y,A,i,c,z){"transparent"!==z&&(d.setVariable("fillStyle",z),d.fillRect(y,A,i,c),aH+=1)}function a1(a,d,c){return a.length>0?d+c.toUpperCase():g}function a3(a,c){switch(c){case"lowercase":return a.toLowerCase();case"capitalize":return a.replace(/(^|\s|:|-|\(|\))([a-z])/g,a1);case"uppercase":return a.toUpperCase();default:return a}}function aV(a){return/^(normal|none|0px)$/.test(a)}function a2(a,d,i,c){null!==a&&aR.trimText(a).length>0&&(c.fillText(a,d,i),aH+=1)}function aX(E,B,d,D){var y=!1,A=aB(B,"fontWeight"),z=aB(B,"fontFamily"),F=aB(B,"fontSize"),C=aR.parseTextShadows(aB(B,"textShadow"));switch(parseInt(A,10)){case 401:A="bold";break;case 400:A="normal"}return E.setVariable("fillStyle",D),E.setVariable("font",[aB(B,"fontStyle"),aB(B,"fontVariant"),A,F,z].join(" ")),E.setVariable("textAlign",y?"right":"left"),C.length&&(E.setVariable("shadowColor",C[0].color),E.setVariable("shadowOffsetX",C[0].offsetX),E.setVariable("shadowOffsetY",C[0].offsetY),E.setVariable("shadowBlur",C[0].blur)),"none"!==d?aR.Font(z,F,ay):g}function aN(d,o,y,i,c){switch(o){case"underline":a4(d,y.left,Math.round(y.top+i.baseline+i.lineWidth),y.width,1,c);break;case"overline":a4(d,y.left,Math.round(y.top),y.width,1,c);break;case"line-through":a4(d,y.left,Math.ceil(y.top+i.middle+i.lineWidth),y.width,1,c)}}function a7(y,A,C,z,c){var B;if(ba.rangeBounds&&!c){("none"!==C||0!==aR.trimText(A).length)&&(B=aQ(A,y.node,y.textOffset)),y.textOffset+=A.length}else{if(y.node&&"string"==typeof y.node.nodeValue){var d=z?y.node.splitText(A.length):null;B=aP(y.node,c),y.node=d}}return B}function aQ(a,d,i){var c=ay.createRange();return c.setStart(d,i),c.setEnd(d,i+a.length),c.getBoundingClientRect()}function aP(d,y){var A=d.parentNode,i=ay.createElement("wrapper"),c=d.cloneNode(!0);i.appendChild(d.cloneNode(!0)),A.replaceChild(i,d);var z=y?aR.OffsetBounds(i):aR.Bounds(i);return A.replaceChild(c,i),z}function aS(F,C,z){var a,y,B=z.ctx,A=aB(F,"color"),G=aB(F,"textDecoration"),E=aB(F,"textAlign"),D={node:C,textOffset:0};aR.trimText(C.nodeValue).length>0&&(C.nodeValue=a3(C.nodeValue,aB(F,"textTransform")),E=E.replace(["-webkit-auto"],["auto"]),y=!a9.letterRendering&&/^(left|right|justify|auto)$/.test(E)&&aV(aB(F,"letterSpacing"))?C.nodeValue.split(/(\b| )/):C.nodeValue.split(""),a=aX(B,F,G,A),a9.chinese&&y.forEach(function(c,d){/.*[\u4E00-\u9FA5].*$/.test(c)&&(c=c.split(""),c.unshift(d,1),y.splice.apply(y,c))}),y.forEach(function(d,i){var c=a7(D,d,G,y.length-1>i,z.transform.matrix);c&&(a2(d,c.left,c.bottom,B),aN(B,G,c,a,A))}))}function aY(d,o){var y,i,c=ay.createElement("boundelement");return c.style.display="inline",y=d.style.listStyleType,d.style.listStyleType="none",c.appendChild(ay.createTextNode(o)),d.insertBefore(c,d.firstChild),i=aR.Bounds(c),d.removeChild(c),d.style.listStyleType=y,i}function ax(a){var d=-1,i=1,c=a.parentNode.childNodes;if(a.parentNode){for(;c[++d]!==a;){1===c[d].nodeType&&i++}return i}return -1}function ad(a,d){var i,c=ax(a);switch(d){case"decimal":i=c;break;case"decimal-leading-zero":i=1===(""+c).length?c="0"+(""+c):""+c;break;case"upper-roman":i=v.Generate.ListRoman(c);break;case"lower-roman":i=v.Generate.ListRoman(c).toLowerCase();break;case"lower-alpha":i=v.Generate.ListAlpha(c).toLowerCase();break;case"upper-alpha":i=v.Generate.ListAlpha(c)}return i+". "}function af(z,B,D){var A,d,C,y=B.ctx,c=aB(z,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(c)){if(d=ad(z,c),C=aY(z,d),aX(y,z,"none",aB(z,"color")),"inside"!==aB(z,"listStylePosition")){return}y.setVariable("textAlign","left"),A=D.left,a2(d,A,C.bottom,y)}}function al(a){var c=aT[a];return c&&c.succeeded===!0?c.img:!1}function ag(d,y){var A=Math.max(d.left,y.left),i=Math.max(d.top,y.top),c=Math.min(d.left+d.width,y.left+y.width),z=Math.min(d.top+d.height,y.top+y.height);return{left:A,top:i,width:c-A,height:z-i}}function au(z,B,D){var A,d="static"!==B.cssPosition,C=d?aB(z,"zIndex"):"auto",y=aB(z,"opacity"),c="none"!==aB(z,"cssFloat");B.zIndex=A=x(C),A.isPositioned=d,A.isFloated=c,A.opacity=y,A.ownStacking="auto"!==C||1>y,D&&D.zIndex.children.push(B)}function ap(D,B,y,c,C){var d=a6(B,"paddingLeft"),A=a6(B,"paddingTop"),z=a6(B,"paddingRight"),E=a6(B,"paddingBottom");aG(D,y,0,0,y.width,y.height,c.left+d+C[3].width,c.top+A+C[0].width,c.width-(C[1].width+C[3].width+d+z),c.height-(C[0].width+C[2].width+A+E))}function am(a){return["Top","Right","Bottom","Left"].map(function(c){return{width:a6(a,"border"+c+"Width"),color:aB(a,"border"+c+"Color")}})}function aj(a){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(c){return aB(a,"border"+c+"Radius")})}function aM(d,o,y,i){var c=function(a,r,z){return{x:a.x+(r.x-a.x)*z,y:a.y+(r.y-a.y)*z}};return{start:d,startControl:o,endControl:y,end:i,subdivide:function(C){var z=c(d,o,C),a=c(o,y,C),A=c(y,i,C),D=c(z,a,C),B=c(a,A,C),r=c(D,B,C);return[aM(d,z,D,r),aM(r,B,A,i)]},curveTo:function(a){a.push(["bezierCurve",o.x,o.y,y.x,y.y,i.x,i.y])},curveToReversed:function(a){a.push(["bezierCurve",y.x,y.y,o.x,o.y,d.x,d.y])}}}function aA(y,A,C,z,c,B,d){A[0]>0||A[1]>0?(y.push(["line",z[0].start.x,z[0].start.y]),z[0].curveTo(y),z[1].curveTo(y)):y.push(["line",B,d]),(C[0]>0||C[1]>0)&&y.push(["line",c[0].start.x,c[0].start.y])}function az(z,B,D,A,d,C,y){var c=[];return B[0]>0||B[1]>0?(c.push(["line",A[1].start.x,A[1].start.y]),A[1].curveTo(c)):c.push(["line",z.c1[0],z.c1[1]]),D[0]>0||D[1]>0?(c.push(["line",C[0].start.x,C[0].start.y]),C[0].curveTo(c),c.push(["line",y[0].end.x,y[0].end.y]),y[0].curveToReversed(c)):(c.push(["line",z.c2[0],z.c2[1]]),c.push(["line",z.c3[0],z.c3[1]])),B[0]>0||B[1]>0?(c.push(["line",d[1].end.x,d[1].end.y]),d[1].curveToReversed(c)):c.push(["line",z.c4[0],z.c4[1]]),c}function ac(B,N,G){var D=B.left,R=B.top,F=B.width,J=B.height,I=N[0][0],C=N[0][1],P=N[1][0],O=N[1][1],A=N[2][0],K=N[2][1],M=N[3][0],E=N[3][1],L=F-P,H=J-K,z=F-A,Q=J-E;return{topLeftOuter:a5(D,R,I,C).topLeft.subdivide(0.5),topLeftInner:a5(D+G[3].width,R+G[0].width,Math.max(0,I-G[3].width),Math.max(0,C-G[0].width)).topLeft.subdivide(0.5),topRightOuter:a5(D+L,R,P,O).topRight.subdivide(0.5),topRightInner:a5(D+Math.min(L,F+G[3].width),R+G[0].width,L>F+G[3].width?0:P-G[3].width,O-G[0].width).topRight.subdivide(0.5),bottomRightOuter:a5(D+z,R+H,A,K).bottomRight.subdivide(0.5),bottomRightInner:a5(D+Math.min(z,F+G[3].width),R+Math.min(H,J+G[0].width),Math.max(0,A-G[1].width),Math.max(0,K-G[2].width)).bottomRight.subdivide(0.5),bottomLeftOuter:a5(D,R+Q,M,E).bottomLeft.subdivide(0.5),bottomLeftInner:a5(D+G[3].width,R+Q,Math.max(0,M-G[3].width),Math.max(0,E-G[2].width)).bottomLeft.subdivide(0.5)}}function ak(y,A,C,z,c){var B=aB(y,"backgroundClip"),d=[];switch(B){case"content-box":case"padding-box":aA(d,z[0],z[1],A.topLeftInner,A.topRightInner,c.left+C[3].width,c.top+C[0].width),aA(d,z[1],z[2],A.topRightInner,A.bottomRightInner,c.left+c.width-C[1].width,c.top+C[0].width),aA(d,z[2],z[3],A.bottomRightInner,A.bottomLeftInner,c.left+c.width-C[1].width,c.top+c.height-C[2].width),aA(d,z[3],z[0],A.bottomLeftInner,A.topLeftInner,c.left+C[3].width,c.top+c.height-C[2].width);break;default:aA(d,z[0],z[1],A.topLeftOuter,A.topRightOuter,c.left,c.top),aA(d,z[1],z[2],A.topRightOuter,A.bottomRightOuter,c.left+c.width,c.top),aA(d,z[2],z[3],A.bottomRightOuter,A.bottomLeftOuter,c.left+c.width,c.top+c.height),aA(d,z[3],z[0],A.bottomLeftOuter,A.topLeftOuter,c.left,c.top+c.height)}return d}function ai(M,H,B){var y,K,A,D,C,N,J=H.left,I=H.top,L=H.width,E=H.height,G=aj(M),z=ac(H,G,B),F={clip:ak(M,z,B,G,H),borders:[]};for(y=0;4>y;y++){if(B[y].width>0){switch(K=J,A=I,D=L,C=E-B[2].width,y){case 0:C=B[0].width,N=az({c1:[K,A],c2:[K+D,A],c3:[K+D-B[1].width,A+C],c4:[K+B[3].width,A+C]},G[0],G[1],z.topLeftOuter,z.topLeftInner,z.topRightOuter,z.topRightInner);break;case 1:K=J+L-B[1].width,D=B[1].width,N=az({c1:[K+D,A],c2:[K+D,A+C+B[2].width],c3:[K,A+C],c4:[K,A+B[0].width]},G[1],G[2],z.topRightOuter,z.topRightInner,z.bottomRightOuter,z.bottomRightInner);break;case 2:A=A+E-B[2].width,C=B[2].width,N=az({c1:[K+D,A+C],c2:[K,A+C],c3:[K+B[3].width,A],c4:[K+D-B[3].width,A]},G[2],G[3],z.bottomRightOuter,z.bottomRightInner,z.bottomLeftOuter,z.bottomLeftInner);break;case 3:D=B[3].width,N=az({c1:[K,A+C+B[2].width],c2:[K,A],c3:[K+D,A+B[0].width],c4:[K+D,A+C]},G[3],G[0],z.bottomLeftOuter,z.bottomLeftInner,z.topLeftOuter,z.topLeftInner)}F.borders.push({args:N,color:B[y].color})}}return F}function at(a,c){var d=a.drawShape();return c.forEach(function(i,o){d[0===o?"moveTo":i[0]+"To"].apply(null,i.slice(1))}),d}function aa(a,c,d){"transparent"!==d&&(a.setVariable("fillStyle",d),at(a,c),a.fill(),aH+=1)}function aw(y,A,C){var z,c,B=ay.createElement("valuewrap"),d=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];d.forEach(function(a){try{B.style[a]=aB(y,a)}catch(i){aR.log("html2canvas: Parse: Exception caught in renderFormValue: "+i.message)}}),B.style.borderColor="black",B.style.borderStyle="solid",B.style.display="block",B.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(y.type)||"SELECT"===y.nodeName)&&(B.style.lineHeight=aB(y,"height")),B.style.top=A.top+"px",B.style.left=A.left+"px",z="SELECT"===y.nodeName?(y.options[y.selectedIndex]||0).text:y.value,z||(z=y.placeholder),c=ay.createTextNode(z),B.appendChild(c),aD.appendChild(B),aS(y,c,C),aD.removeChild(B)}function aG(a){a.drawImage.apply(a,Array.prototype.slice.call(arguments,1)),aH+=1}function ar(C,A){var d=w.getComputedStyle(C,A);if(d&&d.content&&"none"!==d.content&&"-moz-alt-content"!==d.content&&"none"!==d.display){var B=d.content+"",y=B.substr(0,1);y===B.substr(B.length-1)&&y.match(/'|"/)&&(B=B.substr(1,B.length-2));var c="url"===B.substr(0,3),z=k.createElement(c?"img":"span");return z.className=aC+"-before "+aC+"-after",Object.keys(d).filter(u).forEach(function(a){try{z.style[a]=d[a]}catch(i){aR.log(["Tried to assign readonly property ",a,"Error:",i])}}),c?z.src=aR.parseBackgroundImage(B)[0].args[0]:z.innerHTML=B,z}}function u(a){return isNaN(w.parseInt(a,10))}function aq(a,d){var i=ar(a,":before"),c=ar(a,":after");(i||c)&&(i&&(a.className+=" "+aC+"-before",a.parentNode.insertBefore(i,a),aL(i,d,!0),a.parentNode.removeChild(i),a.className=a.className.replace(aC+"-before","").trim()),c&&(a.className+=" "+aC+"-after",a.appendChild(c),aL(c,d,!0),a.removeChild(c),a.className=a.className.replace(aC+"-after","").trim()))}function aZ(d,y,A,i){var c=Math.round(i.left+A.left),z=Math.round(i.top+A.top);d.createPattern(y),d.translate(c,z),d.fill(),d.translate(-c,-z)}function aU(D,B,y,c,C,d,A,z){var E=[];E.push(["line",Math.round(C),Math.round(d)]),E.push(["line",Math.round(C+A),Math.round(d)]),E.push(["line",Math.round(C+A),Math.round(z+d)]),E.push(["line",Math.round(C),Math.round(z+d)]),at(D,E),D.save(),D.clip(),aZ(D,B,y,c),D.restore()}function s(a,c,d){a4(a,c.left,c.top,c.width,c.height,d)}function bb(z,B,D,A,d){var C=aR.BackgroundSize(z,B,A,d),y=aR.BackgroundPosition(z,B,A,d,C),c=aB(z,"backgroundRepeat").split(",").map(aR.trimText);switch(A=ah(A,C),c=c[d]||c[0]){case"repeat-x":aU(D,A,y,B,B.left,B.top+y.top,99999,A.height);break;case"repeat-y":aU(D,A,y,B,B.left+y.left,B.top,A.width,99999);break;case"no-repeat":aU(D,A,y,B,B.left+y.left,B.top+y.top,A.width,A.height);break;default:aZ(D,A,y,{top:B.top,left:B.left,width:A.width,height:A.height})}}function n(z,B,D){for(var A,d=aB(z,"backgroundImage"),C=aR.parseBackgroundImage(d),y=C.length;y--;){if(d=C[y],d.args&&0!==d.args.length){var c="url"===d.method?d.args[0]:d.value;A=al(c),A?bb(z,B,D,A,y):aR.log("html2canvas: Error loading background:",d)}}}function ah(a,d){if(a.width===d.width&&a.height===d.height){return a}var i,c=ay.createElement("canvas");return c.width=d.width,c.height=d.height,i=c.getContext("2d"),aG(i,a,0,0,a.width,a.height,0,0,d.width,d.height),c}function ao(a,c,d){return a.setVariable("globalAlpha",aB(c,"opacity")*(d?d.opacity:1))}function an(a){return a.replace("px","")}function l(d){var o=aB(d,"transform")||aB(d,"-webkit-transform")||aB(d,"-moz-transform")||aB(d,"-ms-transform")||aB(d,"-o-transform"),y=aB(d,"transform-origin")||aB(d,"-webkit-transform-origin")||aB(d,"-moz-transform-origin")||aB(d,"-ms-transform-origin")||aB(d,"-o-transform-origin")||"0px 0px";y=y.split(" ").map(an).map(aR.asFloat);var i;if(o&&"none"!==o){var c=o.match(ab);if(c){switch(c[1]){case"matrix":i=c[2].split(",").map(aR.trimText).map(aR.asFloat)}}}return{origin:y,matrix:i}}function t(a,o,z,i){var d=h(o?z.width:aW(),o?z.height:a0()),y={ctx:d,opacity:ao(d,a,o),cssPosition:aB(a,"position"),borders:am(a),transform:i,clip:o&&o.clip?aR.Extend({},o.clip):null};return au(a,y,o),a9.useOverflow===!0&&/(hidden|scroll|auto)/.test(aB(a,"overflow"))===!0&&/(BODY)/i.test(a.nodeName)===!1&&(y.clip=y.clip?ag(y.clip,z):z),y}function a8(a,d,i){var c={left:d.left+a[3].width,top:d.top+a[0].width,width:d.width-(a[1].width+a[3].width),height:d.height-(a[0].width+a[2].width)};return i&&(c=ag(c,i)),c}function e(a,c){var d=c.matrix?aR.OffsetBounds(a):aR.Bounds(a);return c.origin[0]+=d.left,c.origin[1]+=d.top,d}function aO(J,E,A,y){var H,z=l(J,E),C=e(J,z),B=t(J,E,C,z),K=B.borders,G=B.ctx,F=a8(K,C,B.clip),I=ai(J,C,K),D=aI.test(J.nodeName)?"#efefef":aB(J,"backgroundColor");switch(at(G,I.clip),G.save(),G.clip(),F.height>0&&F.width>0&&!y?(s(G,C,D),n(J,F,G)):y&&(B.backgroundColor=D),G.restore(),I.borders.forEach(function(a){aa(G,a.args,a.color)}),A||aq(J,B),J.nodeName){case"IMG":(H=al(J.getAttribute("src")))?ap(G,J,H,C,K):aR.log("html2canvas: Error loading <img>:"+J.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(J.type)&&(J.value||J.placeholder||"").length>0&&aw(J,C,B);break;case"TEXTAREA":(J.value||J.placeholder||"").length>0&&aw(J,C,B);break;case"SELECT":(J.options||J.placeholder||"").length>0&&aw(J,C,B);break;case"LI":af(J,B,F);break;case"CANVAS":ap(G,J,J,C,K)}return B}function av(a){return"none"!==aB(a,"display")&&"hidden"!==aB(a,"visibility")&&!a.hasAttribute("data-html2canvas-ignore")}function aL(a,c,d){av(a)&&(c=aO(a,c,d,!1)||c,aI.test(a.nodeName)||aJ(a,c,d))}function aJ(a,c,d){aR.Children(a).forEach(function(i){i.nodeType===i.ELEMENT_NODE?aL(i,c,d):i.nodeType===i.TEXT_NODE&&aS(a,i,c)})}function aK(){var a=aB(k.documentElement,"backgroundColor"),d=aR.isTransparent(a)&&aE===k.body,c=aO(aE,null,!1,d);return aJ(aE,c),d&&(a=c.backgroundColor),aD.removeChild(aF),{backgroundColor:a,stack:c}}w.scroll(0,0);var aE=a9.elements===g?k.body:a9.elements[0],aH=0,ay=aE.ownerDocument,aR=v.Util,ba=aR.Support(a9,ay),aI=RegExp("("+a9.ignoreElements+")"),aD=ay.body,aB=aR.getCSS,aC="___html2canvas___pseudoelement",aF=ay.createElement("style");aF.innerHTML="."+aC+'-before:before { content: "" !important; display: none !important; }.'+aC+'-after:after { content: "" !important; display: none !important; }',aD.appendChild(aF),aT=aT||{};var a5=function(a){return function(B,D,A,d){var C=A*a,y=d*a,c=B+A,z=D+d;return{topLeft:aM({x:B,y:z},{x:B,y:z-y},{x:c-C,y:D},{x:c,y:D}),topRight:aM({x:B,y:D},{x:B+C,y:D},{x:c,y:z-y},{x:c,y:z}),bottomRight:aM({x:c,y:D},{x:c,y:D+y},{x:B+C,y:z},{x:B,y:z}),bottomLeft:aM({x:c,y:z},{x:c-C,y:z},{x:B,y:D+y},{x:B,y:D})}}}(4*((Math.sqrt(2)-1)/3)),ab=/(matrix)\((.+)\)/;return aK()},v.Preload=function(G){function X(a){u.href=a,u.href=u.href;var c=u.protocol+u.host;return c===P}function I(){A.log("html2canvas: start: images: "+B.numLoaded+" / "+B.numTotal+" (failed: "+B.numFailed+")"),!B.firstRun&&B.numLoaded>=B.numTotal&&(A.log("Finished loading images: # "+B.numTotal+" (failed: "+B.numFailed+")"),"function"==typeof G.complete&&G.complete(B))}function N(C,o,r){var d,y,M=G.proxy;u.href=C,C=u.href,d="html2canvas_"+D++,r.callbackname=d,M+=M.indexOf("?")>-1?"&":"?",M+="url="+encodeURIComponent(C)+"&callback="+d,y=F.createElement("script"),w[d]=function(c){"error:"===c.substring(0,6)?(r.succeeded=!1,B.numLoaded++,B.numFailed++,I()):(H(o,r),o.src=c),w[d]=g;try{delete w[d]}catch(a){}y.parentNode.removeChild(y),y=null,delete r.script,delete r.callbackname},y.setAttribute("type","text/javascript"),y.setAttribute("src",M),r.script=y,w.document.body.appendChild(y)}function K(i,l){var d=w.getComputedStyle(i,l),c=d.content;"url"===c.substr(0,3)&&J.loadImage(v.Util.parseBackgroundImage(c)[0].args[0]),O(d.backgroundImage,i)}function E(a){K(a,":before"),K(a,":after")}function V(a,d){var c=v.Generate.Gradient(a,d);c!==g&&(B[a]={img:c,succeeded:!0},B.numTotal++,B.numLoaded++,I())}function U(a){return a&&a.method&&a.args&&a.args.length>0}function O(a,d){var c;v.Util.parseBackgroundImage(a).filter(U).forEach(function(i){"url"===i.method?J.loadImage(i.args[0]):i.method.match(/\-?gradient$/)&&(c===g&&(c=v.Util.Bounds(d)),V(i.value,c))})}function Q(d){var l=!1;try{A.Children(d).forEach(Q)}catch(i){}try{l=d.nodeType}catch(c){l=!1,A.log("html2canvas: failed to access some element's nodeType - Exception: "+c.message)}if(1===l||l===g){E(d);try{O(A.getCSS(d,"backgroundImage"),d)}catch(i){A.log("html2canvas: failed to get background-image - Exception: "+i.message)}O(d)}}function H(d,c){d.onload=function(){c.timer!==g&&w.clearTimeout(c.timer),B.numLoaded++,c.succeeded=!0,d.onerror=d.onload=null,I()},d.onerror=function(){if("anonymous"===d.crossOrigin&&(w.clearTimeout(c.timer),G.proxy)){var a=d.src;return d=new Image,c.img=d,d.src=a,N(d.src,d,c),g}B.numLoaded++,B.numFailed++,c.succeeded=!1,d.onerror=d.onload=null,I()}}var P,J,z,W,B={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},A=v.Util,D=0,L=G.elements[0]||k.body,F=L.ownerDocument,e=L.getElementsByTagName("img"),n=e.length,u=F.createElement("a"),t=function(a){return a.crossOrigin!==g}(new Image);for(u.href=w.location.href,P=u.protocol+u.host,J={loadImage:function(a){var c,d;a&&B[a]===g&&(c=new Image,a.match(/data:image\/.*;base64,/i)?(c.src=a.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),d=B[a]={img:c},B.numTotal++,H(c,d)):X(a)||G.allowTaint===!0?(d=B[a]={img:c},B.numTotal++,H(c,d),c.src=a):t&&!G.allowTaint&&G.useCORS?(c.crossOrigin="anonymous",d=B[a]={img:c},B.numTotal++,H(c,d),c.src=a):G.proxy&&(d=B[a]={img:c},B.numTotal++,N(a,c,d)))},cleanupDOM:function(d){var o,c;if(!B.cleanupDone){d&&"string"==typeof d?A.log("html2canvas: Cleanup because: "+d):A.log("html2canvas: Cleanup after timeout: "+G.timeout+" ms.");for(c in B){if(B.hasOwnProperty(c)&&(o=B[c],"object"==typeof o&&o.callbackname&&o.succeeded===g)){w[o.callbackname]=g;try{delete w[o.callbackname]}catch(r){}o.script&&o.script.parentNode&&(o.script.setAttribute("src","about:blank"),o.script.parentNode.removeChild(o.script)),B.numLoaded++,B.numFailed++,A.log("html2canvas: Cleaned up failed img: '"+c+"' Steps: "+B.numLoaded+" / "+B.numTotal)}}w.stop!==g?w.stop():k.execCommand!==g&&k.execCommand("Stop",!1),k.close!==g&&k.close(),B.cleanupDone=!0,d&&"string"==typeof d||I()}},renderingDone:function(){W&&w.clearTimeout(W)}},G.timeout>0&&(W=w.setTimeout(J.cleanupDOM,G.timeout)),A.log("html2canvas: Preload starts: finding background-images"),B.firstRun=!0,Q(L),A.log("html2canvas: Preload: Finding images"),z=0;n>z;z+=1){J.loadImage(e[z].getAttribute("src"))}return B.firstRun=!1,A.log("html2canvas: Preload: Done."),B.numTotal===B.numLoaded&&I(),J},v.Renderer=function(d,e){function c(n){function s(a){Object.keys(a).sort().forEach(function(B){var z=[],A=[],u=[],t=[];a[B].forEach(function(r){r.node.zIndex.isPositioned||1>r.node.zIndex.opacity?u.push(r):r.node.zIndex.isFloated?A.push(r):z.push(r)}),function y(r){r.forEach(function(C){t.push(C),C.children&&y(C.children)})}(z.concat(A,u)),t.forEach(function(r){r.context?s(r.context):l.push(r.node)})})}var o,l=[];return o=function(a){function y(G,z,F){var A="auto"===z.zIndex.zindex?0:Number(z.zIndex.zindex),C=G,B=z.zIndex.isPositioned,H=z.zIndex.isFloated,E={node:z},D=F;z.zIndex.ownStacking?(C=E.context={"!":[{node:z,children:[]}]},D=g):(B||H)&&(D=E.children=[]),0===A&&F?F.push(E):(G[A]||(G[A]=[]),G[A].push(E)),z.zIndex.children.forEach(function(r){y(C,r,D)})}var u={};return y(u,a),u}(n),s(o),l}function i(a){var l;if("string"==typeof e.renderer&&v.Renderer[a]!==g){l=v.Renderer[a](e)}else{if("function"!=typeof a){throw Error("Unknown renderer")}l=a(e)}if("function"!=typeof l){throw Error("Invalid renderer defined")}return l}return i(e.renderer)(d,e,k,c(d.stack),v)},v.Util.Support=function(d,l){function i(){var n=new Image,s=l.createElement("canvas"),e=s.getContext===g?!1:s.getContext("2d");if(e===!1){return !1}s.width=s.height=10,n.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{e.drawImage(n,0,0),s.()}catch(u){return !1}return v.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function c(){var s,z,u,e,y=!1;return l.createRange&&(s=l.createRange(),s.getBoundingClientRect&&(z=l.createElement("boundtest"),z.style.height="123px",z.style.display="block",l.body.appendChild(z),s.selectNode(z),u=s.getBoundingClientRect(),e=u.height,123===e&&(y=!0),l.body.removeChild(z))),y}return{rangeBounds:c(),svgRendering:d.svgRendering&&i()}},w.html2canvas=function(i,s){i=i.length?i:[i];var d,c,l={logging:!1,elements:i,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return l=v.Util.Extend(s,l),v.logging=l.logging,l.complete=function(a){("function"!=typeof l.onpreloaded||l.onpreloaded(a)!==!1)&&(d=v.Parse(a,l),("function"!=typeof l.onparsed||l.onparsed(d)!==!1)&&(c=v.Renderer(d,l),"function"==typeof l.onrendered&&l.onrendered(c)))},w.setTimeout(function(){v.Preload(l)},0),{render:function(a,n){return v.Renderer(a,v.Util.Extend(n,l))},parse:function(a,n){return v.Parse(a,v.Util.Extend(n,l))},preload:function(a){return v.Preload(v.Util.Extend(a,l))},log:v.Util.log}},w.html2canvas.log=v.Util.log,w.html2canvas.Renderer={Canvas:g},v.Renderer.Canvas=function(D){function e(a,c){a.beginPath(),c.forEach(function(d){a[d.name].apply(a,d.arguments)}),a.closePath()}function C(a){if(-1===u.indexOf(a.arguments[0].src)){B.drawImage(a.arguments[0],0,0);try{B.getImageData(0,0,1,1)}catch(c){return E=y.createElement("canvas"),B=E.getContext("2d"),!1}u.push(a.arguments[0].src)}return !0}function n(a,d){switch(d.type){case"variable":a[d.name]=d.arguments;break;case"function":switch(d.name){case"createPattern":if(d.arguments[0].width>0&&d.arguments[0].height>0){try{a.fillStyle=a.createPattern(d.arguments[0],"repeat")}catch(c){A.log("html2canvas: Renderer: Error creating pattern",c.message)}}break;case"drawShape":e(a,d.arguments);break;case"drawImage":d.arguments[8]>0&&d.arguments[7]>0&&(!D.taintTest||D.taintTest&&C(d))&&a.drawImage.apply(a,d.arguments);break;default:a[d.name].apply(a,d.arguments)}}}D=D||{};var y=k,u=[],E=k.createElement("canvas"),B=E.getContext("2d"),A=v.Util,z=D.canvas||y.createElement("canvas");return function(L,H,d,J,F){var o,M,I,K=z.getContext("2d"),G=L.stack;return z.width=z.style.width=H.width||G.ctx.width,z.height=z.style.height=H.height||G.ctx.height,I=K.fillStyle,K.fillStyle=A.isTransparent(G.backgroundColor)&&H.background!==g?H.background:L.backgroundColor,K.fillRect(0,0,z.width,z.height),K.fillStyle=I,J.forEach(function(a){K.textBaseline="bottom",K.save(),a.transform.matrix&&(K.translate(a.transform.origin[0],a.transform.origin[1]),K.transform.apply(K,a.transform.matrix),K.translate(-a.transform.origin[0],-a.transform.origin[1])),a.clip&&(K.beginPath(),K.rect(a.clip.left,a.clip.top,a.clip.width,a.clip.height),K.clip()),a.ctx.storage&&a.ctx.storage.forEach(function(c){n(K,c)}),K.restore()}),A.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===H.elements.length&&"object"==typeof H.elements[0]&&"BODY"!==H.elements[0].nodeName?(M=F.Util.Bounds(H.elements[0]),o=d.createElement("canvas"),o.width=Math.ceil(M.width),o.height=Math.ceil(M.height),K=o.getContext("2d"),K.drawImage(z,M.left,M.top,M.width,M.height,0,0,M.width,M.height),z=null,o):z}}})(window,document);